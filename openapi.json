{"openapi":"3.1.0","info":{"title":"RetroWatch","description":"API documentation for RetroWatch backend","version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearer-jwt":[]}],"paths":{"/api/webhooks/clerk":{"post":{"tags":["clerk-webhook-controller"],"operationId":"handleClerkWebhook","parameters":[{"name":"svix-id","in":"header","required":false,"schema":{"type":"string"}},{"name":"svix-timestamp","in":"header","required":false,"schema":{"type":"string"}},{"name":"svix-signature","in":"header","required":false,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/tasks/process-video-worker":{"post":{"tags":["video-worker-controller"],"operationId":"processVideo","parameters":[{"name":"Authorization","in":"header","required":false,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerPayload"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/protected/videos/upload":{"post":{"tags":["video-controller"],"operationId":"uploadVideo","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/protected/supabase/insert/{tableName}":{"post":{"tags":["supabase-example-controller"],"operationId":"insertIntoTable","parameters":[{"name":"tableName","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/protected/process-video":{"post":{"tags":["process-video-controller"],"operationId":"processVideo_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessVideoRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/protected/ads/upload":{"post":{"tags":["ad-controller"],"operationId":"uploadAd","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/protected/supabase/update/{tableName}":{"patch":{"tags":["supabase-example-controller"],"operationId":"updateTable","parameters":[{"name":"tableName","in":"path","required":true,"schema":{"type":"string"}},{"name":"filters","in":"query","required":true,"schema":{"type":"object","additionalProperties":{"type":"string"}}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/config":{"get":{"tags":["config-controller"],"operationId":"config","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/protected/videos":{"get":{"tags":["video-controller"],"operationId":"getVideos","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VideoUpload"}}}}}}}},"/api/protected/videos/{id}":{"get":{"tags":["video-controller"],"operationId":"getVideo","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["video-controller"],"operationId":"deleteVideo","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/protected/supabase/storage/url/{bucket}/{path}":{"get":{"tags":["supabase-example-controller"],"operationId":"getFileUrl","parameters":[{"name":"bucket","in":"path","required":true,"schema":{"type":"string"}},{"name":"path","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/protected/supabase/query/{tableName}":{"get":{"tags":["supabase-example-controller"],"operationId":"queryTable","parameters":[{"name":"tableName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/protected/supabase/query/{tableName}/filtered":{"get":{"tags":["supabase-example-controller"],"operationId":"queryTableFiltered","parameters":[{"name":"tableName","in":"path","required":true,"schema":{"type":"string"}},{"name":"filters","in":"query","required":true,"schema":{"type":"object","additionalProperties":{"type":"string"}}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/protected/processing-status":{"get":{"tags":["process-video-controller"],"operationId":"getProcessingStatus","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/protected/processing-status/{jobId}":{"get":{"tags":["process-video-controller"],"operationId":"getProcessingStatusByJobId","parameters":[{"name":"jobId","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/protected/hello":{"get":{"tags":["protected-controller"],"operationId":"secureEndpoint","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/protected/ads":{"get":{"tags":["ad-controller"],"operationId":"getAds","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdUpload"}}}}}}}},"/api/protected/ads/{id}":{"get":{"tags":["ad-controller"],"operationId":"getAd","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["ad-controller"],"operationId":"deleteAd","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/hello":{"get":{"tags":["hello-controller"],"operationId":"hello","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/protected/supabase/delete/{tableName}":{"delete":{"tags":["supabase-example-controller"],"operationId":"deleteFromTable","parameters":[{"name":"tableName","in":"path","required":true,"schema":{"type":"string"}},{"name":"filters","in":"query","required":true,"schema":{"type":"object","additionalProperties":{"type":"string"}}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"WorkerPayload":{"type":"object","properties":{"jobId":{"type":"string"},"userId":{"type":"string"},"videoId":{"type":"integer","format":"int64"},"adIds":{"type":"array","items":{"type":"integer","format":"int64"}},"shaderStyle":{"type":"string"}}},"ProcessVideoRequest":{"type":"object","properties":{"videoId":{"type":"integer","format":"int64"},"adIds":{"type":"array","items":{"type":"integer","format":"int64"}},"shaderStyle":{"type":"string","enum":["CRT","VHS","ARCADE"]}}},"VideoUpload":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"string"},"fileName":{"type":"string"},"fileUrl":{"type":"string"},"storagePath":{"type":"string"},"fileSize":{"type":"integer","format":"int64"},"durationSeconds":{"type":"number","format":"double"},"uploadedAt":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["PENDING","READY","PROCESSING","DELETED"]}}},"AdUpload":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"string"},"fileName":{"type":"string"},"fileUrl":{"type":"string"},"storagePath":{"type":"string"},"fileSize":{"type":"integer","format":"int64"},"durationSeconds":{"type":"number","format":"double"},"uploadedAt":{"type":"string","format":"date-time"}}}},"securitySchemes":{"bearer-jwt":{"type":"http","description":"JWT token from Clerk","scheme":"bearer","bearerFormat":"JWT"}}}}
